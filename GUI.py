import customtkinter as ctk
from PIL import Image
from entities import Tag, Timeline, Base, Photo
from sqlalchemy import create_engine
from sqlalchemy.orm import Session

engine = create_engine('sqlite:///:memory:', echo=True)
Base.metadata.create_all(engine)
sess = Session(engine)


def add_image_to_database(**kwargs):
    if "from_default_set" in kwargs:
        default_image = kwargs.pop("from_default_set")

    if default_image == "plus":
        plus = Photo(
            caption="plus",
            data=b'10001001010100000100111001000111000011010000101000011010000010100000000000000000000000000000110101001001010010000100010001010010000000000000000000000001011101100000000000000000000000010000010000001000000001100000000000000000000000000011110010110100000111111010111100000000000000000000011001010010010010010100010001000001010101000111100010011100111011011101110000110001011010001001001110001011000110101100011111100001001101111110000100110100001010100100001001101000000101111011000100100111100000100000011000010001111011001110001000100100111000101110000001100100001111010101010010111001001011100010110110111000010110010111000001110010101010010001100110000101100011100110011101101001101111011000100010001011100001100100111001001110110101010100010100010000001010111011100000111001000010000000111000101110001110100010100010111000101101000101100110101110100010000111111000010100101101110110001001000111101000011011100111000011111001010111101001111011110011101110110101101001001111011011010111110110010010110101111010011111011001110100101110111111001101101111100110000111110100100101111110011010111101000110101100101010100111010100111010100111000110110100000001011111101010101101010101101010010000111100110101100110011100111010010111101100000111011111010010010110011010101101100100000011000000001101100001011001110000100000111010010000100011001011000000000011001001000010001111101100000000001100100100001000001110110100000000110010110000100000111010010000100011001011000000000011001001000010001111101100000000001100100100001000001110110100000000110010110000100000111010010000100011001011000000000011001001000010001111101100000000001100100100001000001110110100000000110010110000100000111010010000100011001011000000000011001001000010001111101100000000001100100100001000001110110100000000110010110000100000111010010000100011001011000000000011001001000010001111101100000000001100100100001000001110110100000000110010110000100000111010010000100011001011000000000011001001000010001111101100000000001100100100001000001110110100000000110010110000100000111010010000100011001011000000000011001001000010001111101100000000001100100100001000001110110100000000110010110000100000111010010000110011000010111101100101000011111110000011111011001111010111111111111110001111000001111000111111011111100001110001001011010010110100101100110001001111000011110000011100000101110010111001011100100010000100101110010111001011100100010110110101111010100111000100011011011111100100011010010101010011101010011111010011001011010111101100000100110110110111011111110111111011101101110110111000011101011110101111010110111111110111110111111100110011001001100100110011001100010011011100110111000101110111101111110111111011100010110101100001000101011011101110100101010101101010101100001101001101011001101111001101100101011011001001110111110100000101101111111100010010101101011111000111110111101011111001111101101110110110000111010100001000110010001001011110101111000111100000010001111100111111001111110011101110111011110000001000111010000000010111000010110111101100011100010110000101100001011000110110001111011111111011100000110000011000001101011101010110100000001011110100000100100110000111101111011000111110111111011110101111011101101111110100111110001111001011110010111100100010111000101101000000010111101010001001101100001111011110110001101101011011010110110101010011011000111101110111101110111111111001111100000000100011111100100011011000010000011101001000010001101101100000000001100100100001000101110110100000000110010010000100000111010010000000011001011000010000011101001000010001101101100000000001100100100001000101110110100000000110010010000100000111010010000000011001011000010000011101001000010001101101100000000001100100100001000101110110100000000110010010000100000111010010000000011001011000010000011101001000010001101101100000000001100100100001000101110110100000000110010010000100000111010010000000011001011000010000011101001000010001101101100000000001100100100001000101110110100000000110010010000100000111010010000000011001011000010000011101001000010001101101100000000001100100100001000101110110100000000110010010000100000111010010000000011001011000010000011101001000010001101101100000000001100100100001000101110110100000000110010010000100000111010010000000011001011000010000011101001000010001101101100000000001100100100001000101110110100000000110010010000100000111010010000000011001011000010000011101001000010001101101100000110111010100000001010001000101110011001100111011001110110001101110010011100100011001000100110001001101010011011100010111000010110000100100001011011001100100110111011011001100110010111001011100101111011111111100100011111101100110011001111010011110100011100101011110101111010111101110110111111000111101010000001001111111110111110010111101100101000011111110100000110101100010111000101110001011001100010011010100110101000101010001001100010011000100111101000101101010101101011010001000101000100010101011100001111101111110110111011010111100011111101111110100111010000011100001111000111100000110001101110101101110011101110101101111010111101110111011010010110100000101000100010101010001110001001110100011101000111010001000111001101101001011011000101001100010110010111100111101101001101101111101101100011011111011101111100010010110101011111111110100111011010101100101011101010111011000110111011001110110011101101100101111111011101101110110011111001111100111100011100001111101111110100111010010011100001110000111000101100010010001110110111100011111111110001001111101001010101001111101001111011001010111101010100110010010001110100111101111110110011011001011010001011010101011010001100000011111000111111000111110001000100010000111101111110111111011101100010111001101100110110011011111100011110010111001011100101111001001010010111111001011011001010110110001101100001011000110111011011100101110000001000111111011111101111110111100101111011110110100101001011111101010111101010101101010010000111100110101100110011100111010010111101100000111011111010000010110001011111100010110101100101100111011100010111000000110000001000111110001001101011110101001001111100111100011110010001001100110011001100100011001010100011111111100000001100111100011111001111101000110100011001100110011001100110110010111001111100000001001010010000100011111011001110111010101110101011101010101101000001101000001101001011111001011110011111101111100111110001011000011000100001101011111100100111101011110101111010010101000111011000000100110010000100100101011000011111111110010011110101011101010011010101101100100010011000000001011111010001011101100001010111101110011111111001111100011110001001010001000101000100010001111100111111111111110010111001111011000010100100000000110110100010011111101100111010111101010111101010111101010001100100011111000111111000111111011001110110001101100010001000100010000001100000011100000111010010110001110110010100010111001100000011000000110000001101100100010011101000000010010101100001011111110001001111101011110101110010111011000101110001000111111111001110000011101111100111110000111000011100001111001001011010111111001000111011011111101111110101111010110110010001001110100000001001010010011100111011111111100000010111000101110001011100010110101111111001111111101010110111010110111110110111011000110110100101101000101010011110010101000100011110000000110000001110000011110100011110101010110101011000101111001011100101110010111110010111001111011010010111101111001110011101110110010000100011010000100111111010001101110111101011111111111111100111110001111100111110111111010010101001111011010001100001111111001100010011001100110011101100111110010000000011110011111111110111111011111101100111011011101100111101111010011110100111101001100110001001100100011001000010010101000111010001110100011010100010001010001000101110011001100111111001111110001111001010100101011010101111110001011010100101010010101001111010001011011101011011111100011110111001011100101110011001100010011001000110010101100101110100101110101000011000000110100001101110001011101000110100011010001111010001101011010111101010110010001110001001001110000100000111011000110110001000111110110001111100011011000111001001110011011100111100101101111111111000101110111001110101001110100011101101110111011110111111111101111101101010111000010110001111000111100011111101000110101111010101111110001111100010011000100110001001101011101110011111111100010100110000111101100001011001100010001011011110010100111000000001101110110101100110100000110100011000100110111001101110101011111110110000011000110000000001011100111100000111100000011001001000010001111101100000000001100100100001000001110110100000000110010110000100000111010010000100011001011000000000011001001000010001111101100000000001100100100001000001110110100000000110010110000100000111010010000100011001011000000000011001001000010001111101100000000001100100100001000001110110100000000110010110000100000111010010000100011001011000000000011001001000010001111101100000000001100100100001000001110110100000000110010110000100000111010010000100011001011000000000011001001000010001111101100000000001100100100001000001110110100000000110010110000100000111010010000100011001011000000000011001001000010001111101100000000001100100100001000001110110100000000110010110000100000111010010000100011001011000000000011001001000010001111101100000000001100100100001000001110110100000000110010110000100000111010010000100011001011000000000011001001000010001111101100000000001100100100001000001110110100000000110010110000100000111010010000100011001011000000000011001001000010001111101100011111010110110011011111101111100111110110011011000111101010111101010110011111010111101111100001011001111110010000100111101111111000111110011101001111000111100101110010110100111110001111000111100011100001110111011011101001010010010101000000001011110001000111110110001111100011011000110110001101100001011011110101011110101111110100101111100011110101111110111101011110100111010100010111110101110000000010111101010000101101100011111011110110001110000111000011100001111110001111001110100111010011101101110001111000001100000010000001001111110111110001111100011000000110000000100000010110101010110101010110010111001011110001111000101100011010010001100101010000001001100100101010100111010100111010100111010110111111011000001000101111101100111111001010110010100100101000111100011110111111011000101100110111101011110001111001000100111000011100001110000111011000101011110011111001111100111111000111100100010010001101000111110010101001111011000101001011101010100011010101011010100100001111001101011001100111001110100101111011000001110111110100000101100110000110000111001111100010011011101100011011001100010001001011001100010000000011001001000010000011101101000000001100101100001000001110100100001000110010110000000000110010010000100011111011000000000011001001000010000011101101000000001100101100001000001110100100001000110010110000000000110010010000100011111011000000000011001001000010000011101101000000001100101100001000001110100100001000110010110000000000110010010000100011111011000000000011001001000010000011101101000000001100101100001000001110100100001000110010110000000000110010010000100011111011000000000011001001000010000011101101000000001100101100001000001110100100001000110010110000000000110010010000100011111011000000000011001001000010000011101101000000001100101100001000001110100100001000110010110000000000110010010000100011111011000000000011001001000010000011101101000000001100101100001000001110100100001000110010110000000000110010010000100011111011000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001111110010111100100101100001101110001101011111110001010010111111111111101011101001011100001101000001101011101111100010101110000111100001110111110010001000100010101010100110010110001111000000100110000011111011110101101011101011011101011111110101011000101010100101011000001110010101100010000010001110010101011010101111010111110111000010000110000100000111111010000110101110010101100010001011010101110101000101111101011100100010100001000001110110100000101111110101010100101010110100111101000111101101000101101101110101101110111101110101111101101011110111011110111011101111011001011100111100000001111000000000011111111000001101110000011000000011000110100000000100010110000010100011000110110010000000000000000000000000000000000100100101000101010011100100010010101110010000100110000010000010')
        sess.add(plus)
        return "plus photo added"
    else:
        photo = Photo(num_uses=0)

        if "data" in kwargs:
            photo.data = kwargs.pop("data")

        if "caption" in kwargs:
            photo.caption = kwargs.pop("caption")

        if "name" in kwargs:
            photo.name = kwargs.pop("name")

        if "date_taken" in kwargs:
            photo.date_taken = kwargs.pop("date_taken")

        sess.add(Photo())


class HomeScreen(ctk.CTk):

    def __init__(self):
        super().__init__()

        add_image_to_database(from_default_set="plus")

        self.my_image = ctk.CTkImage(light_image=Image.open(sess.query(Photo).filter(Photo.caption == "plus")),
                                     size=(150, 100))

        self.configure(background="white")
        self.title("Home")

        self.title_text = ctk.CTkLabel(self,
                                       text="Home",
                                       font=("Arial Bold", 35),
                                       pady=20
                                       )

        self.sort_by_label = ctk.CTkLabel(self,
                                          text="Sort by:",
                                          font=("Arial", 13))

        self.sorter = ctk.CTkComboBox(self,
                                      values=["A-Z", "Z-A", "Recently modified", "Custom (drag)"],
                                      command=self.sort_request
                                      )

        self.add_new_thumbnail = ctk.CTkButton(self,
                                               image = self.my_image)

        self.place()

    def place(self):
        self.title_text.grid(row=0, column=0, columnspan=3)
        self.sort_by_label.grid(row=1, column=0)
        self.sorter.grid(row=1, column=1)
        self.add_new_thumbnail.grid(row=2, column=1)

    def sort_request(self):
        ...


gui = HomeScreen()
gui.mainloop()
